import{r as s,A as x,a as c,j as e,d as O}from"./index-UflRP7eK.js";import{I as C,S as d}from"./Status-Cs1R85Hn.js";import{A as P}from"./Avatar-jHhvZ4Jm.js";import{G as u,F as g}from"./FormButton-DcNYAbgY.js";import{P as v,C as A}from"./CrewSelect-hfNN5Ib0.js";import"./position-CtgMU1tI.js";function q({employee:t}){const[a,l]=s.useState({firstname:t.firstname,lastname:t.lastname}),n=i=>{l(i)},[r,o]=s.useState(t.employeeId),S=i=>{o(i)},[m,f]=s.useState({label:t.position,value:t.position}),[p,y]=s.useState({label:t.crew,value:t.crew}),b={...t,...a,employeeId:r,position:m.value,crew:p.label.split(" - ")[0]},E=`${x.EMPLOYEE_API_URI}/${t._id}`,{status:j,triggerRequest:I}=c({query:"put",url:E,body:b}),{status:h,triggerRequest:w}=c({query:"delete",url:E});return e.jsxs("form",{className:"w-full flex flex-col gap-32",children:[e.jsx(P,{name:a,handleNameOnChange:n,isEditable:!0}),e.jsx(u,{name:"employeeId",children:e.jsx(C,{id:"employeeId",value:r,handleOnChange:S,isEditable:!0})}),e.jsx(u,{name:"position",children:e.jsx(v,{isEditable:!0,activePosition:m,setActivePosition:f})}),e.jsx(u,{name:"crew",children:e.jsx(A,{isEditable:!0,activeCrew:p,setActiveCrew:y})}),e.jsx(d,{status:j,errorMessage:"Error updating Employee.",successMessage:"Employee was successfully updated.",className:"mt-32"}),e.jsx(d,{status:h,errorMessage:"Error deleting Employee.",successMessage:"Employee was successfully deleted.",className:"mt-32"}),e.jsxs("div",{className:"flex flex-row mt-32 justify-between",children:[e.jsx(g,{type:"submit",ariaLabel:"Update Employee",bg:"bg-green",handleOnClick:I,icon:"done",label:"Update"}),e.jsx(g,{type:"submit",ariaLabel:"Delete Employee",bg:"bg-red",handleOnClick:w,icon:"delete",label:"Delete"})]})]})}function L(){const{id:t}=O(),[a,l]=s.useState(),{status:n,triggerRequest:r}=c({query:"get",url:`${x.EMPLOYEE_API_URI}/${t}`,onSuccess:o=>{l(o)}});return s.useEffect(()=>{r()},[]),a?e.jsx(q,{employee:a}):e.jsx(d,{status:n,errorMessage:"Error fetching Employee."})}export{L as default};
