import{r as c,u as S,j as e,S as f,a as u,b as I,A as g,c as y,d as O,R as B}from"./index-WRblNOmq.js";import{S as p,G as h,I as E}from"./Status-4t2SuwKi.js";import{F as j}from"./FormButton-CiJ3zu8R.js";function v({branches:n,activeBranchOption:r,setActiveBranchOption:a}){const l=n.map(t=>({value:t._id,label:t.name}));return e.jsx(f,{isEditable:!0,options:l,defaultOption:r||{label:"Select a Branch",value:"Select a Branch"},setActiveOption:a,renderActiveOption:t=>e.jsx(u,{label:t.label,className:"bg-sky_blue border-t-0"}),renderOptions:t=>t.map(s=>e.jsx(I,{option:s,children:e.jsx(u,{label:s.label,className:"bg-sky_blue border-t-2 border-light_navy hover:bg-light_navy"})},`${s.label}_${s.value}_Option_BranchSelect`))})}function _({activeBranchOption:n,setActiveBranchOption:r}){const[a,l]=c.useState([]),{status:t,triggerRequest:s}=S({query:"get",url:g.ALL_BRANCHES_SHORT_API_URI,onSuccess:o=>{l(o)}});return c.useEffect(()=>{s()},[]),a.length>0?e.jsx(v,{branches:a,activeBranchOption:n,setActiveBranchOption:r}):e.jsx(p,{status:t,errorMessage:"Error fetching Branches"})}function C(){const[n,r]=c.useState({value:"Select a Branch",label:"Select a Branch"}),[a,l]=c.useState(""),t=i=>{l(i)},s=a.length>1,{employee:o,setEmployee:d}=y(),{status:m,triggerRequest:b}=S({query:"get",url:`${g.EMPLOYEE_API_URI(n.value)}/${a}`,onSuccess:i=>{d(i)}}),x=O();return c.useEffect(()=>{o._id&&x(B.profile)},[o]),e.jsx("div",{className:"grow flex items-center",children:e.jsxs("form",{className:"w-full flex flex-col gap-32",children:[e.jsx(h,{name:"branch",children:e.jsx(_,{activeBranchOption:n,setActiveBranchOption:r})}),e.jsx(h,{name:"employeeId",children:e.jsx(E,{isEditable:!0,id:"employeeId",value:a,handleOnChange:t})}),e.jsx(p,{status:m,errorMessage:"No employee found",successMessage:"Signing in ..."}),e.jsx(j,{type:"submit",ariaLabel:"Sign In",disabled:!s,className:s?"opacity-1":"opacity-75",bg:"bg-white",handleOnClick:b,icon:"arrow",iconClassName:"-rotate-90 order-1",label:"Sign In"})]})})}export{C as default};
